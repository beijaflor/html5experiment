<!doctype html>
<html lang="ja">
	<head>
		<meta charset="UTF-8">
		<title>html5 experiment "canvas"</title>
	</head>
	<body style="text-align:center;">
	<h1>canvas experiment</h1>
	<canvas id="experiment" width="300" height="300" style="border:solid 1px #999;"></canvas>

	<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script>
		$(function() {
			console.log('Yo-Ho!');
			var x1, x2, y1, y2;
			x1 = 20;
			x2 = 280;
			y1 = 20;
			y2 = 280;
			r = 255;
			g = 0;
			b = 0;

			var canvas = $('#experiment')[0];
			var c = canvas.getContext('2d');
			setInterval(function() {
				x1 = x1 + 1;
				x2 = x2 - 1;
				g = g + 1;
				drawLine(c, x1, x2, y1, y2, makeColorCode(r,g,b));
			}, 10);

			function drawLine(ctx, x1, x2, y1, y2, color) {
				var LINE_WIDTH = "0.3";

				ctx.strokeStyle = color;
				ctx.lineWidth = LINE_WIDTH;
				ctx.beginPath();
				ctx.moveTo(x1, y1);
				ctx.lineTo(x2, y2);
				ctx.closePath();
				ctx.stroke();
			}

			function makeColorCode(r, g, b) {
				r = ( r < 16 ) ? '0' + r.toString(16) : r.toString(16);
				g = ( g < 16 ) ? '0' + g.toString(16) : g.toString(16);
				b = ( b < 16 ) ? '0' + b.toString(16) : b.toString(16);
				return "#" + r + g + b;
			}

		});
	</script>
	</body>
</html>